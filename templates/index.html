{% extends 'base.html' %}

{% block head %}
<title>Bookmark</title>
{% endblock %}

{% block body %}


<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <h1>Ben's Books</h1>
            </div>
            <div class="col-md-6">
                <form id="searchForm" action="/query/" method="POST" style="float: left;">
                    <input id="query" type="text" name="query" placeholder="Search for a book by title, author, etc.">
                    <input id="submitQuery" type="submit" value="Search">
                </form>
            </div>
            <div class="col-md-3">
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="listHeaderMenu">
                    <form action="/sort" method="post">
                        Sort by: 
                        <input name="sortTitle" value="Title" type="submit">
                        <input name="sortAuthor" value="Author" type="submit">
                        <input name="sortPageCount" value="Page Count" type="submit">
                        <input name="sortPubDate" value="Publication Date" type="submit">
                        <input name="sortDateAdded" value="Date Added" type="submit">
                    </form>
                    <form action="/displayMode" method="post" style="padding-left: 20px;">
                        <input name="switchDisplayMode" value="Toggle Display Mode" type="submit">
                    </form>
                </div>
                {% if showImages %}
                    <table class="table-wimg">
                        <tr class="bookRow"></tr>
                        {% for i in range(books|length) %}
                            <tr class="bookRow">
                                <td class="thumbnail">
                                    <img class="thumbnail" src="{{ books[i].img_url }}" />
                                </td>
                                <td class="bookListing">
                                    <table>
                                        <tr><td class="title-wimg"><h3>{{ books[i].title }}</h3></td></tr>
                                        <tr><td class="author-wimg"><h6>{{ books[i].author }}</h6></td></tr>
                                        {% if books[i].page_count != "" %}
                                            <tr><td class="pages-wimg">{{ books[i].page_count }} pages</td></tr>
                                        {% endif %}
                                        <tr><td class="publicationDate-wimg">Published {{ books[i].pub_date }}</td></tr>
                                        <tr><td class="dateAdded-wimg">Added {{ books[i].date_added }}</td></tr>
                                    </table>
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                {% else %}
                    <table class="table-list">
                        <tr class="listHeader">
                            <th class="titleCol">Title</th>
                            <th class="spacerCol"></th>
                            <th class="authorCol">Author</th class="titleCol">
                            <th class="pageCol">Pages</th class="titleCol">
                            <th class="pubDateCol">Published</th class="titleCol">
                            <th class="startedCol">Started</th>
                            <th class="finishedCol">Finished</th>
                        </tr>
                        <tr class="bookRow"></tr>

                        {% for i in range(books|length) %}
                            <tr class="bookRow">
                                <td class="title">{{ books[i].title }}</td>
                                <td class="spacerCol"></td>
                                <td class="author">{{ books[i].author }}</td>
                                {% if books[i].page_count != "" %}
                                    <td class="pages">{{ books[i].page_count }}</td>
                                {% endif %}
                                <td class="publicationDate">{{ books[i].pub_date }}</td>
                                <td class="dateStarted">{{ books[i].date_started }}</td>
                                {% if books[i].date_finished == None %}
                                    <td class="dateFinished">
                                        <form action="/finish_book/" method="POST" style="float:left;">
                                            <input id="finishedBook" type="hidden" name="finishedBook" value={{books[i].id}}>
                                            <input id="finishedDate" type="text" name="finishedDate" placeholder="...">
                                        </form>
                                    </td>
                                {% else %}
                                    <td class="dateFinished">{{ books[i].date_finished }}</td>
                                {% endif %}
                                <td>
                                    <form action="/delete/{{ books[i].id }}">
                                        <input type="submit" value="❌"/>
                                    </form>
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}